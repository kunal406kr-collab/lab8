<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Employee Directory</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#8AA624] min-h-screen p-6">
  <h1 class="text-3xl font-bold text-center text-gray-700 mb-6">Employee Directory</h1>

  <!-- Search Box -->
  <div class="flex justify-center gap-2 mb-6">
    <select id="field" class="px-3 py-2 bg-gray-800 text-gray-200 border border-gray-700 rounded-lg">
      <option value="name">Name</option>
      <option value="department">Department</option>
      <option value="designation">Designation</option>
    </select>
    <input type="text" id="term" placeholder="Enter search term"
      class="px-3 py-2 bg-gray-800 text-gray-200 border border-gray-700 rounded-lg w-52 focus:outline-none focus:ring-2 focus:ring-yellow-500"/>
    <button onclick="searchEmployee()" 
      class="px-4 py-2 bg-yellow-500 text-gray-900 font-semibold rounded-lg hover:bg-yellow-600">
      Search
    </button>
    <button onclick="resetSearch()" 
      class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700">
      Reset
    </button>
  </div>

  <!-- Employee Cards -->
  <div id="employee-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></div>

  <script>
    const API_URL = "https://lab8-xmdg.vercel.app/api";

    async function searchEmployee() {
      const field = document.getElementById("field").value;
      const term = document.getElementById("term").value.trim();

      if (!term) {
        alert("Please enter a search term!");
        return;
      }

      try {
        const res = await fetch(`${API_URL}/${field}/${term}`);
        const data = await res.json();
        displayEmployees(data);
      } catch (error) {
        console.error("Error fetching employees:", error);
      }
    }

    function resetSearch() {
      document.getElementById("term").value = "";
      document.getElementById("employee-container").innerHTML =
        `<p class="text-center text-gray-400 col-span-full">Enter a search term to display employees.</p>`;
    }

    function displayEmployees(employees) {
      const container = document.getElementById("employee-container");
      container.innerHTML = "";

      if (employees.length === 0) {
        container.innerHTML = `<p class="text-center text-gray-400 col-span-full">No employees found.</p>`;
        return;
      }

      employees.forEach(emp => {
        const card = document.createElement("div");
        card.className = "bg-[#DBE4C9] rounded-2xl shadow-lg p-5 hover:shadow-2xl transition border border-yellow-400";

        card.innerHTML = `
          <h2 class="text-xl font-bold text-gray-900 mb-2">${emp.name}</h2>
          <p class="text-sm text-gray-800"><span class="font-medium text-gray-900">Department:</span> ${emp.department}</p>
          <p class="text-sm text-gray-800"><span class="font-medium text-gray-900">Designation:</span> ${emp.designation}</p>
          <p class="text-sm text-gray-800"><span class="font-medium text-gray-900">Country:</span> ${emp.country}</p>
          <p class="text-sm text-gray-800"><span class="font-medium text-gray-900">Continent:</span> ${emp.continent}</p>
          <p class="text-sm mt-1">
            <span class="font-medium text-gray-900">Status:</span> 
            <span class="${emp.is_active ? 'text-green-600 font-semibold':'text-red-600 font-semibold'}">
              ${emp.is_active ? 'Active' : 'Inactive'}
            </span>
          </p>
          <p class="text-sm text-gray-800 mt-2"><span class="font-medium text-gray-900">Description:</span> ${emp.details[0].description}</p>
        `;

        container.appendChild(card);
      });
    }

    // Initial message
    document.getElementById("employee-container").innerHTML =
      `<p class="text-center text-gray-400 col-span-full">Enter a search term to display employees.</p>`;
  </script>
</body>
</html>
